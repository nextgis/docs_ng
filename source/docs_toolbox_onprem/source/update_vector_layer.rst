Обновление слоя Веб ГИС из CSV-файла
====================================

Инструмент обновляет содержание точечного слоя Веб ГИС, используя данные из CSV-файла. Обновление возможно в 2 режимах: добавление объектов к существующим или замена всех существующих объектов слоя.
Структура данных в CSV-файле и в слое Веб ГИС должна совпадать.   

На входе:

* Адрес Веб ГИС - url-адрес вашей Веб ГИС, например, https://demo.nextgis.com.
* Логин - Имя пользователя Веб ГИС.
* Пароль - Пароль пользователя Веб ГИС.
* Идентификатор слоя в Веб ГИС - Необходимо указать соответствующее слою число, его можно узнать в адресной строке браузера. Например, слою "Границы контуров" соответствует число 5137, так как адрес этого ресурса - https://demo.nextgis.com/resource/5137.
* Файл CSV - файл с координатами объектов. Поля для обозначения широты и долготы объектов должны быть названы lat и lon, соответственно. Координаты должны быть указаны в системе координат  WGS84 (EPSG 4326). Если в таблице содержатся даты, то они должны быть записаны в `ISO <https://docs.python.org/3/library/datetime.html#datetime.datetime.isoformat>`_ формате, например, 2019-05-18T15:17:08.132263.
* Разделитель - Тип разделителя для загружаемого CSV-файла, например, ; (точка с запятой).
* Режим - Режим обновления слоя. Для добавления объектов к существующим выберите режим Add, для замены всех существующих объектов слоя - Replace. Регистр не важен. 

На выходе:

* Обновленный точечный слой Веб ГИС
* CSV-файл, в котором указаны идентификатор обновляемого слоя в Веб ГИС, выбранный режим, количество загруженных объектов и гиперссылка на обновленный слой в Веб ГИС.

Если инструмент не может обработать загруженный csv-файл и обновить слой в Веб ГИС, пользователь может столкнуться со следующими проблемами:

* Ошибка Invalid type указывает на неверный идентификатор слоя. Для корректной работы инструмента необходимо указывать идентификатор слоя, а не папки, в которой этот слой может быть размещен.
* Ошибка Invalid type of the layer указывает на неверный тип слоя. В данном инструменте могут быть использованы только векторные слои.
* Ошибка Invalid operation mode появляется в случае, когда пользователем был неверно введен режим работы инструмента. Возможны только два варианта работы - Replace и Add.
* Ошибка Invalid geometry type - геометрия слоя содержит объекты, отличные от точки. Инструмент позволяет обновлять только точечные слои.
* Ошибка Invalid structure of the layer указывает на различие в структурах загруженного CSV-файла и слоя Веб ГИС.

`Видео <https://youtu.be/CmMcSA0-QIg?si=kGNTNcPvUBlmKSPY>`_

Запуск инструмента: https://toolbox.nextgis.com/operation/update_vector_layer

**Попробуйте инструмент в действии, скачав наш пример:**

`Набор исходных данных <https://nextgis.ru/data/toolbox/update_vector_layer/update_vector_layer_inputs_ru.zip>`_ для проверки работы инструмента. Внутри архива пошаговая инструкция.

`Пример результата <https://nextgis.ru/data/toolbox/update_vector_layer/update_vector_layer_outputs_ru.zip>`_ работы инструмента.

