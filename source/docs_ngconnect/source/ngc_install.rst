
.. _ng_connect_install:

Установка
=========

Для загрузки модуля NextGIS Connect перейдите в меню настройки модулей из главной панели: *Модули ‣ Управление модулями*. Начните набирать в поиске название модуля, выберите его в списке и нажмите кнопку **Установить модуль**.

В ПО `NextGIS QGIS <http://nextgis.ru/nextgis-qgis/>`_ модуль NextGIS Connect включен в поставку, вы можете сразу начинать работу.

При необходимости проверить/обновить версию модуля можно в разделе меню *Модули ‣ Управление модулями ‣ NextGIS Connect*. 



.. _ng_connect_connection:

Подключение к Веб ГИС
=====================

После установки модуля на панели инструментов появится иконка: 

.. figure:: _static/nextgis_connect/logo.png
   :align: center
   :alt: Иконка модуля расширения NextGIS Connect.

При нажатии на иконку появится панель управления ресурсами Веб ГИС.

.. figure:: _static/nextgis_connect/connect_panel_ru.png
   :align: center
   :alt: Панель модуля расширения NextGIS Connect
   :width: 10cm
   
   Панель модуля расширения NextGIS Connect

Если на данный момент не настроено ни одно подключение, вы увидите сообщение с предложением 
создать свою Веб ГИС.

.. figure:: _static/nextgis_connect/panel-no-connections_ru.png
   :align: center
   :alt: Панель модуля расширения NextGIS Connect при отсутствии подключения
   :width: 10cm
   
   Панель модуля расширения NextGIS Connect при отсутствии подключения

Если ранее на устройстве использовалась версия NextGIS Connect, не поддерживавшая аутентификацию QGIS, то при включении обновленной версии будет предложено конвертировать существующие соединения и данные аутентификации. Это можно сделать через окно NextGIS Connect, а также в настройках модуля.

.. figure:: _static/nextgis_connect/connect_update_convert_ru.png
   :align: center
   :name: connect_update_convert_pic
   :alt: Панель модуля расширения NextGIS Connect после обновления
   :width: 8cm

   Предупреждение о необходимости конвертации соединений

.. figure:: _static/nextgis_connect/ngc_upd_convert_menu_ru.png
   :align: center
   :name: ngc_upd_convert_menu_pic
   :alt: Настройки модуля расширения NextGIS Connect после обновления
   :width: 22cm

   Настройки модуля расширения NextGIS Connect после обновления с сообщением о конвертации


.. _ng_connect_new_connection:

Создание подключения
--------------------

Для создания подключения вам необходимо знать адрес вашей Веб ГИС.
Например, если вы создали свою Веб ГИС, ее адрес вы можете узнать на странице:
https://my.nextgis.com/webgis

.. figure:: _static/nextgis_connect/my_nextgis.png
   :align: center
   :alt: Адрес Веб ГИС
   :width: 20cm
   
   Адрес Веб ГИС

Нажмите кнопку "Настройки" на панели модуля расширения NextGIS Connect.

.. figure:: _static/nextgis_connect/call_settings_ru.png
   :align: center
   :alt: Вызов диалога настроек
   :width: 10cm

   Вызов диалога настроек

В открывшемся окне нажмите кнопку **Новое** и заполните поля:

1. URL - адрес интересующей вас Веб ГИС.
2. Название - идентификатор подключения для быстрого поиска в списке подключений.

.. figure:: _static/nextgis_connect/create_connection_ru.png
   :align: center
   :width: 24cm
   :name: create_connection_pic
   :alt: Добавление соединения
   
   Добавление соединения

Далее в разделе "Аутентификация" добавьте новую конфигурацию или выберите из существующих (в списке отражается название соединения и имя пользователя, а также тип аутентификации).

Можно оставить значение по умолчанию "Без аутентификации", если нет необходимости выполнять действия, правами на которые не обладает неавторизованный пользователь (Гость).
Например,возможность создавать/удалять ресурсы недоступна неавторизованным пользователям, только владельцу Веб ГИС и участникам `команды <https://docs.nextgis.ru/docs_ngcom/source/create.html#ngcom-team-management>`_.

Для того, чтобы **добавить новую конфигурацию**, нажмите кнопку с зеленым плюсом.

Откроется диалоговое окно "Аутентификация".

.. figure:: _static/nextgis_connect/auth_config_create_ru.png
   :align: center
   :width: 12cm
   :name: auth_config_create_pic
   :alt: Добавление конфигурации аутентификации
   
   Добавление конфигурации аутентификации

1. Введите произвольное название конфигурации в поле *Имя*;
2. Выберите Basic-аутентификацию в выпадающем меню ниже;
3. Заполните поля *Пользователь* и *Пароль* данными вашего NextGIS ID;
4. Нажмите **Сохранить**.

Убедитесь, что выбрана нужная конфигурация. Если хотите проверить правильность введенных данных, нажмите "Проверка подключения". Затем нажмите **Сохранить** в окне "Создание подключения" (:numref:`create_connection_pic`). 

Нажмите кнопку "ОК". 

Подключение, выбранное в выпадающем списке "Соединения" диалога "Настройки" станет активным **после закрытия** диалога.
